<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estante de Recursos Digitales Entalpía</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Configuración de la fuente y estilos generales */
        :root {
            --primary-blue: #0A3D62; /* Azul Oscuro Metalizado */
            --accent-blue: #3C8CE7; /* Azul Vivo Metalizado */
            --text-color: #E0E7FF;
            --background-dark: #0F172A; /* Slate 950 */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-dark);
            color: var(--text-color);
        }

        /* Estilo para la barra de desplazamiento horizontal (como Netflix) */
        .scroll-container::-webkit-scrollbar {
            height: 8px;
        }
        .scroll-container::-webkit-scrollbar-thumb {
            background: var(--primary-blue);
            border-radius: 4px;
        }
        .scroll-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Estilo del efecto de hover en las tarjetas */
        .card-item:hover {
            transform: scale(1.05);
            z-index: 10;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            border-color: var(--accent-blue);
        }

        /* Estilo para la marca de agua atenuada en el fondo */
        #watermark-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('LogoEntalpia.html'); /* Usando el nombre de archivo especificado */
            background-repeat: no-repeat;
            background-position: center;
            background-size: 40%; /* Ajusta el tamaño de la marca de agua */
            opacity: 0.05; /* Nivel de atenuación muy bajo */
            pointer-events: none; /* Asegura que no interfiera con la interacción del usuario */
            z-index: 0;
        }

        /* Estilos personalizados para el tema azul metálico */
        .header-bg {
            background-color: rgba(10, 61, 98, 0.95); /* var(--primary-blue) con opacidad */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        .accent-text {
            color: var(--accent-blue);
        }
        .card-bg {
            background-color: rgba(10, 61, 98, 0.5); /* Semi-transparente */
            border: 1px solid rgba(60, 140, 231, 0.2);
        }

        /* Animación para el botón de play */
        .play-button {
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(60, 140, 231, 0.5);
        }
        .play-button:hover {
            background-color: #1a4d70;
            transform: scale(1.1);
        }

    </style>
</head>
<body>

    <!-- Contenedor de la marca de agua -->
    <div id="watermark-bg"></div>

    <!-- Cabecera / Barra de Navegación (Fija) -->
    <header class="header-bg sticky top-0 z-20 py-4 px-6 md:px-12">
        <div class="flex items-center justify-between max-w-7xl mx-auto">
            <h1 class="text-3xl font-extrabold tracking-tight accent-text">
                <span class="text-white">ENTALPÍA</span> HUB
            </h1>
            
            <!-- Buscador (Search Bar) -->
            <div class="relative flex-grow mx-4 max-w-md hidden sm:block">
                <input type="text" id="search-input" placeholder="Buscar por título o expositor..." 
                       class="w-full bg-slate-700/50 text-white border border-slate-600 rounded-full py-2 pl-10 pr-4 text-sm focus:outline-none focus:ring-2 focus:ring-accent-blue transition duration-200">
                <!-- Icono de Búsqueda (Lucide) -->
                <svg xmlns="http://www.w3.org/2000/svg" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
            </div>

            <nav class="hidden md:flex space-x-6 text-sm font-medium">
                <!-- Se ha modificado el href para que apunte directamente a index.html y recargue la página -->
                <a href="index.html" class="hover:accent-text transition duration-200">Inicio</a>
                <a href="#capacitaciones" class="hover:accent-text transition duration-200">Capacitaciones</a>
                <a href="#presentaciones" class="hover:accent-text transition duration-200">Presentaciones</a>
                <a href="#recursos" class="hover:accent-text transition duration-200">Otros Recursos</a>
            </nav>
        </div>
    </header>

    <!-- Contenido Principal -->
    <main class="py-10 px-4 md:px-8 relative z-10 max-w-7xl mx-auto">

        <!-- Banner Promocional Principal (Recurso Destacado: Manual de GLP) - SECCIÓN FIJA -->
        <section class="mb-12 p-8 rounded-lg" style="background: linear-gradient(90deg, #1e3a8a 0%, rgba(30, 58, 138, 0.3) 100%);">
            <h2 class="text-4xl md:text-5xl font-bold mb-4">Capacitación "Manual de uso seguro del GLP en tanques estacionarios"</h2>
            <p class="text-lg mb-6 max-w-3xl">Acceda al manual de capacitación completo del expositor.</p>
            <!-- FIX: Cambiado window.location.href por window.open(..., '_blank') para evitar el error de URL no válida y abrir el PDF en una nueva pestaña. -->
            <button onclick="window.open('ManualUsoGLP.pdf', '_blank')" class="play-button bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-full transition duration-300 flex items-center">
                <!-- Icono de Play/Abrir (SVG de Lucide) -->
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                </svg>
                Abrir Contenido
            </button>
        </section>

        <!-- Contenedor para las categorías y recursos generados por JS - CONTENIDO DINÁMICO -->
        <div id="resource-content">
            <!-- Las categorías y los resultados de búsqueda se inyectarán aquí -->
        </div>
    </main>

    <footer class="text-center py-6 border-t border-slate-800 text-sm text-slate-400">
        <p>&copy; 2024 Entalpía Hub. Todos los derechos reservados.</p>
    </footer>

    <script>
        // --- MOCK DATA: Estructura de Contenido Original ---
        const originalResourcesData = [
            {
                id: 'capacitaciones',
                title: 'Capacitaciones Clave',
                resources: [
                    { title: 'Innovación Ágil', speaker: 'Laura V. (Consultora)', url: 'InnovacionAgil.pdf', description: 'Una inmersión en metodologías ágiles para equipos de alto rendimiento.' },
                    { title: 'Liderazgo 4.0', speaker: 'Carlos M. (Director)', url: 'Liderazgo40.pptx', description: 'Cómo liderar equipos virtuales y remotos en el entorno actual.' },
                    { title: 'Análisis de Datos con IA', speaker: 'Sofía P. (Científica)', url: 'AnalisisIA.docx', description: 'Técnicas fundamentales para la limpieza y visualización de datos.' },
                    { title: 'Negociación Efectiva', speaker: 'Javier R. (Coach)', url: 'NegociacionEfectiva.html', description: 'Estrategias probadas para obtener resultados en situaciones complejas.' },
                    { title: 'Ciberseguridad Básica', speaker: 'Elena F. (Técnico)', url: 'Ciberseguridad.mp4', description: 'Guía rápida para proteger la información sensible de la empresa.' },
                ]
            },
            {
                id: 'presentaciones',
                title: 'Presentaciones de Oradores',
                resources: [
                    { title: 'Futuro del Trabajo', speaker: 'Invitado Especial', url: 'FuturoTrabajo.pdf', description: 'Tendencias que redefinirán las estructuras organizacionales.' },
                    { title: 'Marketing Digital', speaker: 'Ana S. (Especialista)', url: 'MarketingDigital.pdf', description: 'Las 5 palancas clave para el crecimiento de marca.' },
                    { title: 'Finanzas Personales', speaker: 'Roberto G. (Orador)', url: 'FinanzasPersonales.pdf', description: 'Mejora tu salud financiera con hábitos simples y efectivos.' },
                    { title: 'Gestión del Cambio', speaker: 'María L. (Gerente)', url: 'GestionCambio.mp4', description: 'Superando la resistencia y promoviendo la adopción de nuevas herramientas.' },
                ]
            },
            {
                id: 'recursos',
                title: 'Recursos Complementarios',
                resources: [
                    { title: 'Guía de Estilo', speaker: 'Equipo Creativo', url: 'GuiaEstilo.pdf', description: 'Documento interno sobre el uso correcto de la marca.' },
                    { title: 'Plantillas PPT', speaker: 'Diseño', url: 'PlantillasPPT.zip', description: 'Paquete de diapositivas de presentación corporativa.' },
                    { title: 'Reporte Anual', speaker: 'Dirección', url: 'ReporteAnual.pdf', description: 'Resumen de logros y proyecciones para el próximo año fiscal.' },
                ]
            }
        ];
        
        // Contenedor dinámico donde se inyectan las secciones (actualizado a 'resource-content')
        const shelfContainer = document.getElementById('resource-content');

        /**
         * Renders the resource shelf based on the provided data structure.
         * @param {Array<Object>} dataToRender - Array of category objects.
         */
        function renderResources(dataToRender) {
            shelfContainer.innerHTML = ''; // Limpia solo el contenido dinámico (debajo del banner)
            
            // El banner ya no se manipula aquí, ya que es estático en el HTML.

            dataToRender.forEach(category => {
                // Si la categoría está vacía, no la mostramos (importante para los resultados de búsqueda vacíos)
                if (category.resources.length === 0) return; 

                // 1. Crear el contenedor de la categoría
                const categorySection = document.createElement('section');
                categorySection.id = category.id;
                categorySection.className = 'mb-12';

                // 2. Título de la categoría
                const title = document.createElement('h2');
                title.className = 'text-2xl md:text-3xl font-bold mb-4 ml-2 hover:accent-text transition duration-200 cursor-pointer';
                title.textContent = category.title;
                categorySection.appendChild(title);

                // 3. Contenedor de scroll horizontal
                const scrollWrapper = document.createElement('div');
                scrollWrapper.className = 'scroll-container flex space-x-4 pb-4 overflow-x-auto';

                // 4. Llenar con tarjetas de recursos
                category.resources.forEach(resource => {
                    // Usar window.open directamente en la tarjeta para abrir el recurso en una nueva pestaña
                    const card = document.createElement('div'); 
                    card.onclick = () => window.open(resource.url, '_blank'); // Usar onclick en div en lugar de <a> para evitar problemas de URL
                    card.className = 'card-item flex-shrink-0 w-48 md:w-56 h-72 rounded-lg p-4 transition-all duration-300 ease-in-out cursor-pointer card-bg relative overflow-hidden flex flex-col justify-end';

                    // Simulación de imagen/placeholder
                    const placeholder = document.createElement('div');
                    placeholder.className = 'absolute inset-0 bg-blue-900/40 flex items-center justify-center';
                    
                    // Icono para la tarjeta
                    const icon = document.createElement('div');
                    icon.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="${getIconColor(resource.url)}" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                        ${getIconPath(resource.url)}
                                    </svg>`;
                    icon.className = 'p-3 rounded-full bg-blue-500/10 backdrop-blur-sm shadow-xl';
                    placeholder.appendChild(icon);
                    card.appendChild(placeholder);


                    // Contenido de la tarjeta
                    const content = document.createElement('div');
                    content.className = 'relative z-10';

                    const titleEl = document.createElement('h3');
                    titleEl.className = 'text-lg font-semibold leading-tight mb-1 text-white truncate';
                    titleEl.textContent = resource.title;

                    const speakerEl = document.createElement('p');
                    speakerEl.className = 'text-xs text-slate-300 mb-2';
                    speakerEl.textContent = `Orador: ${resource.speaker}`;
                    
                    const descEl = document.createElement('p');
                    descEl.className = 'text-xs text-slate-400 opacity-0 card-item-desc transition duration-300 group-hover:opacity-100 hidden md:block';
                    descEl.textContent = resource.description;

                    const fileType = document.createElement('span');
                    fileType.className = 'absolute top-2 right-2 text-xs font-mono px-2 py-0.5 rounded-full bg-blue-600 text-white';
                    fileType.textContent = resource.url.split('.').pop().toUpperCase();


                    content.appendChild(titleEl);
                    content.appendChild(speakerEl);
                    content.appendChild(descEl);
                    card.appendChild(fileType);
                    card.appendChild(content);

                    scrollWrapper.appendChild(card);
                });

                categorySection.appendChild(scrollWrapper);
                shelfContainer.appendChild(categorySection);
            });
        }


        document.addEventListener('DOMContentLoaded', () => {
            // Inicializar la vista con todos los recursos
            renderResources(originalResourcesData);

            // --- Lógica del Buscador ---
            const searchInput = document.getElementById('search-input');
            if (searchInput) {
                searchInput.addEventListener('keyup', (e) => {
                    const query = e.target.value.trim().toLowerCase();
                    
                    if (query === '') {
                        // Si está vacío, volvemos a mostrar la estructura original
                        renderResources(originalResourcesData);
                        return;
                    }

                    // Aplanar y filtrar todos los recursos
                    const allResources = originalResourcesData.flatMap(cat => cat.resources);
                    
                    const filteredResources = allResources.filter(resource => 
                        resource.title.toLowerCase().includes(query) || 
                        resource.speaker.toLowerCase().includes(query)
                    );

                    // Reestructurar los resultados para la función de renderizado
                    const searchResultsData = [{
                        id: 'busqueda',
                        title: `Resultados de Búsqueda (${filteredResources.length})`,
                        resources: filteredResources
                    }];

                    renderResources(searchResultsData);
                });
            }


            // --- Lógica de Navegación por Scroll Suave (Mantenida) ---
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);
                    if (targetElement) {
                        // Se ajusta el scroll al elemento de destino
                        window.scrollTo({
                            top: targetElement.offsetTop - 70, // Ajuste para la cabecera fija
                            behavior: 'smooth'
                        });
                    }
                });
            });

        });

        // --- Funciones Auxiliares (Íconos y Colores) ---

        /**
         * Función para determinar el path del ícono basado en la extensión del archivo.
         */
        function getIconPath(url) {
            const extension = url.split('.').pop().toLowerCase();
            switch (extension) {
                case 'pdf':
                    return '<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="10" x2="14" y1="12" y2="16"></line><line x1="14" x2="10" y1="12" y2="16"></line>'; // FileText/PDF
                case 'mp4':
                case 'mov':
                case 'avi':
                    return '<polygon points="5 3 19 12 5 21 5 3"></polygon><rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect>'; // Video
                case 'pptx':
                case 'ppt':
                    return '<rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect><path d="M9 3v18"></path><path d="M15 3v18"></path>'; // Presentation
                case 'doc':
                case 'docx':
                    return '<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" x2="12" y1="12" y2="18"></line><line x1="9" x2="15" y1="15" y2="15"></line>'; // Document
                case 'html':
                    return '<polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline><line x1="12" x2="12" y1="2" y2="22"></line>'; // Code (Web Resource)
                default:
                    return '<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>'; // Default (File)
            }
        }

        /**
         * Función para dar color al ícono según el tipo de archivo (resaltando el azul metálico).
         */
        function getIconColor(url) {
            const extension = url.split('.').pop().toLowerCase();
            switch (extension) {
                case 'mp4':
                case 'mov':
                    return '#3C8CE7'; // Azul Vivo
                case 'pdf':
                    return '#F0F9FF'; // Blanco Azulado
                default:
                    return '#93C5FD'; // Azul Claro
            }
        }

    </script>
</body>
</html>
